# Control Subsystem

The control subsystem behaves as a logic circuit. It's triggered by a fully charged signal from capacitor bank. Then signals are sent out to turn on or off other subsystems. The timing diagram looks like this.

![Control Output Timing Diagram](Img/ControlTimingDiagram.png)

This image is generated by [WaveDrom](https://wavedrom.com).
<details>
  <summary>Click to see the code.</summary>
  <pre>
{
  signal: [
    {name: 'Trigger', wave: 'l..pl........'},
    {},
    {name: 'Electromagnet', wave: 'l.......h.l..', node: '...a....b.c'},
    {name: 'Starter', wave: 'l.......h.l..'},
    {name: 'Propellant Injector', wave: 'l..h.l.......', node: '...d.e'},
    {name: 'Capacitor Bank', wave: 'h.......l.h..'}
  ],
  edge: [
    'd<->e t1', 'a<->b t2', 'b<->c t3'
  ]
}</pre>
</details>

When the trigger signal comes in, a high logic signal lasts for **t1** turns on the propellant injector. After **t2**, electromagnet and starter are turned on by a same high logic signal lasts for **t3**. The capacitor signal is inverse of coil or starter signal. The delay between propellant injector and starter is because the propellant needs some time to reach the nozzle.

![Control Circuit](Img/ControlCircuit.png)

Three NE555 monostable circuit are used in the control subsystem. When the input signal comes in, it triggers U1 and U3 at the same time. U3 outputs the propellant injector signal, where RV3 controls **t1**. U1 outputs a intermediate signal to U2, where RV1 controls the delay **t2**. Finally, U2 is triggered by the falling edge of U1's output. It then sends out the coil and starter signal, where RV2 controls **t3**. The signal is inverted by Q1 to form the capacitor signal.

![Control Photo](Img/ControlPhoto.jpg)

**Status**: Done.

## Alternative Design

This circuit can be implemented by a ATtiny85 or Arduino with the code to run the logic.
